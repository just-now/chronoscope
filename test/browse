#!/usr/bin/env bash

# set -x
set -e

[[ -n $1 ]] || { echo "usage: ./browse chronoscope.db"; exit 1; }

DB="$1"
RQ=$(echo 'select DISTINCT(id) from tick where type="conn";' | sqlite3 $DB)

for r in $RQ; do
    ./env chronoscope -d $DB tree -k $r
    ./env chronoscope -d $DB chart -k $r
done
